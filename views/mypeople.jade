extends layout
block content
    if session.user
        div.add-team-member-button + Add Team Member
        div.add-person-container
            p.header Add Team Member
            form(name="add", id="add", action="/mypeople/add_team_member", method="post")
                div.fields-container
                    div
                        input(type="text", name="first_name", id="first_name", placeholder="First name", required)
                    div
                        input(type="text", id="surname", name="surname", placeholder="Surname", required)
                    div
                        input(type="text", name="job_title", id="job_title", placeholder="Job title", required)
                    div
                        div(data-tags-input-name="expert_skills", id="expertskills")
                    div
                        div(data-tags-input-name="intermediate_skills", id="intermediateskills")
                    div
                        div(data-tags-input-name="basic_skills", id="basicskills")
                    div Available now?
                        input(type="checkbox", name="availability", id="availability")
                    div(id="availability-container", name="availability-container") Available for
                        br
                        select(name="equality", id="equality")
                            option() More than
                            option() Less than
                            option() Exactly
                        select(name="num", id="num")
                            option() 1
                            option() 2
                            option() 3
                            option() 4
                            option() 5
                            option() 6
                            option() 7
                            option() 8
                            option() 9
                            option() 10
                            option() 11
                            option() 12
                            option() 13
                            option() 14
                            option() 15
                            option() 16
                            option() 17
                            option() 18
                            option() 19
                            option() 20
                        select(name="unit", id="unit")
                            option() Days
                            option() Weeks
                            option() Months
                div.button-container
                    div
                        input(type="submit", value="Add Team Member")
        div
            div.team-members-container
                table(cellspacing="0")
                    tr
                        td.header
                            span Name
                        td.header
                            span Skills &amp; Ability Levels
                        td.header
                            span Job Description
                        td.header
                            span Availability
                        td.header
                            span Duration of Availability
                    if !team_members.length
                        td(colspan="5") You haven't added any team members
                    else
                        each member in team_members
                            tr(id="#{member.data.key}", class=(team_member_id === member.data.key)?'target':'')
                                td(valign="top")
                                    span #{member.data.surname}, #{member.data.first_name}
                                td.skills(valign="top")
                                    div.skill-header Expert
                                    div.skill-content
                                        span.
                                            #{member.data.expert}
                                    div.skill-header Intermediate
                                    div.skill-content
                                        span.
                                            #{member.data.intermediate}
                                    div.skill-header Basic
                                    div.skill-content
                                        span.
                                            #{member.data.basic}
                                td(valign="top")
                                    span #{member.data.job_title}
                                td(valign="top")
                                    if member.data.availability === "true"
                                        div.available-icon
                                td(valign="top")
                                    span #{member.data.availability_duration.equality} #{member.data.availability_duration.number} #{member.data.availability_duration.unit}

        script.
            var options = {
                "no-duplicate": true,
                "no-duplicate-callback": false,
                "forbidden-chars-callback": false,
                "forbidden-words-callback": false,
                "tag-char": "Â·",
                "spacebar": true
            };
            $("#expertskills").tagging(options);
            $("#expertskills .type-zone").attr("placeholder", "Enter expert skills");

            $("#intermediateskills").tagging(options);
            $("#intermediateskills .type-zone").attr("placeholder", "Enter intermediate skills");

            $("#basicskills").tagging(options);
            $("#basicskills .type-zone").attr("placeholder", "Enter basic skills");


            $(document).ready(function () {
                $(window).keydown(function (event) {
                    if (event.keyCode == 13) {
                        event.preventDefault();
                        return false;
                    }
                });

                $('#availability').click(function() {
                    $('#availability-container').is(":visible")?$('#availability-container').hide():$('#availability-container').fadeIn();
                });

                $('.add-team-member-button').click(function() {
                    $('.add-person-container').fadeIn();
                    $('.add-team-member-button').hide();
                });

            });

    else
        div.login-logo
            img(src='images/tradingplaces.png')
        div.error-message-box
            p.
                You must be logged in to use this page.
            br
            a.login-link(id="login-link") Login
        script.
            $('#login-link').click(function() {
                window.location = '/?callbackURL=' + document.URL;
            });